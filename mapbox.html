<!DOCTYPE html>
<html>
<head>
	<title>Center for Buddhist Studies</title>
    <meta charset="utf-8" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

<link href="https://fonts.googleapis.com/css?family=Open+Sans:700" rel="stylesheet">
<link rel="stylesheet" href="css/pageLayout.css">

<link rel="stylesheet" href="css/toolsPanel.css">
<link rel="stylesheet" href="css/infoPanel.css">

<link rel="stylesheet" href="css/filterReligion.css">
<link rel="stylesheet" href="css/yearSlider.css">
</head>

<body>
	
	<div id='map'></div>
  	<div id="sidebar">
  		<div id='sidebar-toggle-container'>
  			<button class="openbtn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
  			<button class="openbtn" onclick="changePanel('home')"><i class="fas fa-home"></i></button>
  			<button class="openbtn" onclick="changePanel('tooltip')"><i class="fas fa-map-marker-alt"></i></button>
  			<button class="openbtn" onclick="changePanel('tools')"><i class="fas fa-atlas"></i></button>
  			<button class="openbtn" onclick="changePanel('site')"><i class="fas fa-info-circle"></i></button>
  		</div>
    	<div id="accordion-container">
    		<img src="https://cbs.arizona.edu/sites/cbs.arizona.edu/files/CBS-logo-2-line-reverse.png" alt="Center for Buddhist Studies">
      		<section id="accordion">
        		<div>
	          		<input type="checkbox" id="check-1" />
          			<label for="check-1">Zoom to Province</label>
          			<article>
        				<div class="btn-group">
        					<button class="navbutton" onclick="map.flyTo({center: [117.374926, 32.008275], zoom: 6})">Anhui</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [113.561742, 22.167867], zoom: 12})">Aomen</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [116.386818, 39.929624], zoom: 10})">Beijing</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [106.566641, 29.562637], zoom: 10})">Chongqing</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [118.368493, 25.834069], zoom: 7})">Fujian</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [101.346130, 38.403688], zoom: 6})">Gansu</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [113.436371, 23.123662], zoom: 7})">Guangdong</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [108.997850, 23.698162], zoom: 7})">Guangxi</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [107.154077, 26.992222], zoom: 7})">Guizhou</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [109.802006, 19.222319], zoom: 7})">Hainan</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [116.587253, 39.428827], zoom: 7})">Hebei</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [128.151316, 48.614785], zoom: 6})">Heilongjiang</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [113.784337, 33.910783], zoom: 7})">Henan</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [112.656225, 31.002359], zoom: 7})">Hubei</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [111.896099, 27.593186], zoom: 8})">Hunan</button>
			                <button class="navbutton" onclick="map.flyTo({center: [119.842564, 33.247693], zoom: 7})">Jiangsu</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [115.840673, 27.600829], zoom: 7})">Jiangxi</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [126.494764, 43.426383], zoom: 7})">Jilin</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [123.219884, 41.488107], zoom: 8})">Liaoning</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [114.523997, 43.703516], zoom: 5})">Neimenggu</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [106.086770, 37.278019], zoom: 7})">Ningxia</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [96.852078, 35.633883], zoom: 5})">Qinghai</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [109.377918, 35.637764], zoom: 7})">Shaanxi</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [118.624023, 36.448211], zoom: 7})">Shandong</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [121.536122, 31.318597], zoom: 10})">Shanghai</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [112.506570, 37.426164], zoom: 7})">Shanxi</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [103.480867, 30.246374], zoom: 7})">Sichuan</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [120.991693, 23.726922], zoom: 7})">Taiwan</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [117.364180, 39.346371], zoom: 10})">Tianjin</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [114.124257, 22.364738], zoom: 10})">Xianggang</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [86.738840, 41.745230], zoom: 4})">Xinjiang</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [89.534891, 31.693452], zoom: 5})">Xizang</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [101.788106, 24.711464], zoom: 7})">Yun nan Sheng</button>
			              	<button class="navbutton" onclick="map.flyTo({center: [120.307056, 29.034386], zoom: 7})">Zhejiang</button>
        				</div>
      				</article>
    			</div>
        		<div>
          			<input type="checkbox" id="check-2" />
          			<label for="check-2">Show/Hide Types (Atlas)</label>
          			<article>
            			<div class="btn-group">
							<button class="navbutton" id="BuddhismBtn" onclick="toggleButtonFill(this, 'rgb(255, 0, 0)', 'none')">Buddhism</button>
			              	<button class="navbutton" id="ChristianityBtn" onclick="toggleButtonFill(this, 'rgb(255, 215, 0)', 'black')">Christianity</button>
			              	<button class="navbutton" id="TaoismBtn" onclick="toggleButtonFill(this, 'rgb(165, 42, 42)', 'none')">Taoism</button>
			              	<button class="navbutton" id="IslamBtn" onclick="toggleButtonFill(this, 'rgb(0, 108, 53)', 'none')">Islam</button>
			              	<button class="navbutton" id="ReligiousManagementBtn" onclick="toggleButtonFill(this, 'rgb(170, 255, 195)', 'black')">Religious Management</button>
			              	<!-- <button class="navbutton" id="OthersBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Others</button> -->
        				</div>
      				</article>
    			</div>
    			<!--
        		<div>
          			<input type="checkbox" id="check-3" />
          			<label for="check-3">Show/Hide Types (BGIS)</label>
          			<article>
            			<div class="btn-group">
							<button class="navbutton" id="ActivityPointBtn" onclick="toggleButtonFill(this, 'rgb(255, 0, 0)', 'none')">Activity Point</button>
			              	<button class="navbutton" id="ShrineBtn" onclick="toggleButtonFill(this, 'rgb(255, 215, 0)', 'black')">Shrine</button>
			              	<button class="navbutton" id="associationBtn" onclick="toggleButtonFill(this, 'rgb(165, 42, 42)', 'none')">Association</button>
			              	<button class="navbutton" id="caveBtn" onclick="toggleButtonFill(this, 'rgb(0, 108, 53)', 'none')">Cave</button>
			              	<button class="navbutton" id="chapelBtn" onclick="toggleButtonFill(this, 'rgb(170, 255, 195)', 'black')">Chapel</button>
			              	<button class="navbutton" id="hallBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Hall</button>
			              	<button class="navbutton" id="houseBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">House</button>
			              	<button class="navbutton" id="monasteryBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Monastery</button>
			              	<button class="navbutton" id="monasteryOneBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Monastery1</button>
			              	<button class="navbutton" id="noneBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Nones</button>
			              	<button class="navbutton" id="othersBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Others</button>
			              	<button class="navbutton" id="templeBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Temple</button>
			              	<button class="navbutton" id="unknownBtn" onclick="toggleButtonFill(this, 'rgb(67, 99, 216)', 'none')">Unknown</button>
        				</div>
      				</article>
    			</div>
    		-
    			<div>
          			<input type="checkbox" id="check-4" />
          			<label for="check-4">Show/Hide Features (BGIS)</label>
          			<article>
            			<div class="btn-group">
          					<button class="navbutton" id="ReligionPntsBtn">Religion Points</button>
			              	<button class="navbutton" id="ChristianityBtn">Counties</button>
			              	<button class="navbutton" id="TaoismBtn">Provinces</button>
			              	<button class="navbutton" id="IslamBtn">Highways</button>
			              	<button class="navbutton" id="ReligiousManagementBtn">State Roads</button>
			              	<button class="navbutton" id="OthersBtn">Provincial Trunk Roads</button>
			              	<button class="navbutton" id="OthersBtn">Railways</button>
			              	<button class="navbutton" id="OthersBtn">Rivers</button>
			              	<button class="navbutton" id="OthersBtn">Main Rivers</button>
        				</div>
      				</article>
    			</div>
    			<div>
					<input type="checkbox" id="check-5" />
      				<label for="check-5">Select Language</label>
      				<article>
        				<div class="btn-group">
          					<button id='button-en' class="navbutton" onclick="map.setLayoutProperty('country-label', 'text-field', 'name_en')">English</button>
          					<button id='button-zh' class="navbutton" onclick=langToChinese()>中文</button>
        				</div>
      				</article>
				</div>
			-->
			</section>
			<section id="tooltip-info">
			</section>
			<section id="spatial-tools">
				<input type="checkbox" id="sliderToggle" checked onclick='toggleSlider(this)'>
				<label for="sliderToggle" id="sliderToggleLabel">Toggle Year Slider</label>
			</section>
			<section id="site-info">
				<p>Interested in CBS?</p>
				<button class="link-button cbs-button" onclick="window.open('https://cbs.arizona.edu/', '_blank')">University of Arizona <br> Center for Buddhist Studies</button><br>
				<button class="link-button cbs-button" onclick="window.open('https://cbs.arizona.edu/buddhist-geographical-information-system-bgis', '_blank')">Buddhist Geographical Information System (BGIS)</button><br>
				<button class="link-button cbs-button" onclick="window.open('https://cbs.arizona.edu/regional-religious-system-rrs', '_blank')">Regional Religious System (RRS)</button>
			</section>
    	</div>

  	</div>

   	<div class='map-overlay top' id='yearSlider'>
	    <div class='map-overlay-inner'>
	        <h2>Religious Sites by Year of Construction</h2>
	        <label id='year'></label>
	        <input id='slider' type='range' min='210' max='2004' step='1' value='2004' />
	    </div>
	</div>

<script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoianNob3dlOCIsImEiOiJjanEwY2M4eDQwNnZiNDNxbmc3OGx5MzR0In0.pbLVjZNSW3QxLtWUklw72Q';
	document.getElementById('spatial-tools').style.opacity = '0.0';

	var map = new mapboxgl.Map({
		container: 'map',
		style: 'mapbox://styles/jshowe8/cjqjv8h0ujgl22rocqc3txqe0',
		zoom: 3,
		center: [103.452083, 35.844694]
	});
	

	// For allowing a space in between 'religious' and 'management' on the button
	var txtContentToReligion = {
		'Religious Management': 'ReligiousManagement',
		'Buddhism': 'Buddhism',
		'Taoism': 'Taoism',
		'Islam': 'Islam',
		'Christianity': 'Christianity',
		'Others' : 'Others'
	}
	

	function langToChinese() {
		map.setLayoutProperty('country-label', 'text-font', ['Open Sans Regular', 'Arial Unicode MS Regular']);
		map.setLayoutProperty('country-label', 'text-field', ['get', 'name_' + 'zh']);
	}

	function toggleSidebar() {
		var mySidebar = document.getElementById("accordion-container");

		if (mySidebar.style.height == "0px") {
			mySidebar.style.height = "";
			setTimeout(function() {
				mySidebar.style.overflowY = 'auto';
			}, 525);
		} else {
			mySidebar.style.overflowY = 'hidden';
			mySidebar.style.height = "0px";
		}
	}

	function changePanel(panelSelect) {
		document.getElementById('spatial-tools').style.opacity = '1.0';

		var homePanel = document.getElementById('accordion');
		var tooltipPanel = document.getElementById('tooltip-info');
		var toolsPanel = document.getElementById('spatial-tools');
		var sitePanel = document.getElementById('site-info');

		var idDict = {
			'home' : homePanel,
			'tooltip' : tooltipPanel,
			'tools' : toolsPanel,
			'site' : sitePanel,
		};

		homePanel.style.display = 'none';
		tooltipPanel.style.display = 'none';
		toolsPanel.style.display = 'none';
		sitePanel.style.display = 'none';

		idDict[panelSelect].style.display = 'inline';
	}

	function toggleButtonChecked(buttonId) {

	}

	// change checkbox colors for type selected under 'Show/Hide Types'
	function toggleButtonFill(buttonId, bgcolor, textColor) {
		console.log(buttonId);
		if (buttonId.style.backgroundColor != bgcolor) {
			buttonId.innerHTML = '<i class="fas fa-check"></i>' + ' ' + buttonId.innerHTML;
			buttonId.style.backgroundColor = bgcolor;

			if (textColor == 'black') {
				buttonId.style.color = textColor;
			}
		} else {
			buttonId.removeChild(buttonId.children[0]);
			buttonId.style.backgroundColor = '#545454';
			buttonId.style.color = '#ffffff';
		}
	}

	function toggleSlider(checkBox) {
		var slider = document.getElementById('yearSlider');

		if (checkBox.checked == true) {
			slider.style.display = '';
		} else {
			slider.style.display = 'none';
		}
	}
</script>
	<!-- <script type="text/javascript" src="js/bgis.js"></script> -->
	<script type="text/javascript" src="js/religion2004.js"></script>
	<!-- <script type="text/javascript" src="js/prov.js"></script> -->
	<!-- <script type="text/javascript" src="js/religion2004onelayer.js"></script> -->
	<!-- <script type="text/javascript" src="js/cline.js"></script> -->

</body>
</html>
